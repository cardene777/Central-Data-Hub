# Metadata

## 概要

メタデータの保存場所として**DACS**を想定している。
しかし、リリースされるまでは他の場所に保存する必要がある。
そこで候補としては、**IPFS**と**Arweave**があげられる。
XeneaのWhitepaperやドキュメントでは、**DACS**がリリースされるまでは**IPFS**を使用するとの文言を見かけた気がします。
そこで、当初**IPFS**を使用する予定だったが、現在**Arweave**を使用しているため、この点について説明する。

## 特徴

**IPFS**と**Arweave**のそれぞれの特徴を挙げつつ、今回一旦は**Arweave**を採用した理由を説明する。

### IPFS

**IPFS**はガス代などをかけることなくデータを保存できる。
一方、ファイル名などはランダムになるため、データを更新するときは毎回新しいパスとなる。
コントラクトで各`tokenId`に紐づくメタデータを管理しているとき、更新のたびにコントラクトを更新する必要がある。
JSライブラリがあったが現在は非推奨になっている。
Heliaというライブラリがあるが、Next.jsのApp Routerで動作が安定しない。

- [https://github.com/ipfs/helia](https://github.com/ipfs/helia)


### Arweave

Arweaveはブロックチェーンであるため、データを保存するにはガス代が必要である。
データを保存するために支払うトークンとしては、**Ethereum**や**Solana**、**Matic**、**Aptos**など複数存在する。
IrisなどArweaveを使用したGatewayサービスなどがあり、パスを固定して中のコンテンツを変更することができる（可変参照）。

- [Mutable references](https://docs.irys.xyz/developer-docs/mutable-references)

これにより、コントラクトで各`tokenId`に紐づくメタデータを管理しているとき、コントラクトを更新せずにコンテンツをアップデートすることができる。

### Arweave選択の理由

Arweaveを使用した場合は可変参照（URLを変更せずに中身を変更できる）が可能なため、コントラクトを更新することなくコンテンツをアップデートできる。
その分ガス代が少額かかってしまうが、**DACS**リリースまでの繋ぎとしては十分と考える。
また、**IPFS**でも**MFS**という可変参照の仕組みがあるが、こちらはNext.jsのApp Routerでうまく動作していないため調査中です。

## 検討

一番実装したい方法としては、コントラクトから**DACS**への直接アクセスによるデータの更新です。
**DACS**にコントラクトから直接アクセスできれば、データの更新権限などを細かく制御できるためここの実装によっては全体の設計を変更します。

